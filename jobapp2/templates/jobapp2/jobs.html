<!doctype html>
<html lang="en">
<head>
    {% load static %}

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Available Jobs</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/job_list.css' %}">  <!-- ‚úÖ Linked CSS -->
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-light bg-light" style="background: transparent !important;">
  <a class="navbar-brand" href="{% url 'home' %}">Dream Jobs</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="{% url 'home' %}">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/jobs/">Jobs</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Contact Us
        </a>&nbsp;&nbsp;
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item">Mobile Number (1800-274937)</a>
          <a class="dropdown-item">Email (dreamjob2025@gmail.com)</a>
          <!-- <div class="dropdown-divider"></div> -->
          <a class="dropdown-item" href="#">Instagram (dream_job_2025)</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/help/">Help</a>
      </li>
      <li>
        <a class="nav-link" href="/about/">About</a>
      </li>

      <!-- Right Button -->
      <div class="form-inline my-2 my-lg-0" style="position: relative; left: 185%;">
        <a class="btn btn-success" type="submit" href="{% url 'home' %}" role="button"> Home </a>
        {% if user.is_authenticated %}
          <div class="profile-icon" style="position: relative; left: 30%;">
            <a href="{% url 'dashboard_redirect' %}">
              {% if profile and profile.profile_pic %}
                <img src="{{ profile.profile_pic.url }}"
                  alt="Profile Picture"
                  class="rounded-circle"
                  style="width:50px; height:50px; object-fit: cover; border: 2px solid #fff;">
              {% else %}

                  <img src="{% static 'images/default-avatar.png' %}"
                    alt="Profile"
                    style="width:40px; height:40px; border-radius: 50%; background: white; padding: 5px;">
              {% endif %}
            </a>
          </div>
        {% else %}
            <a type="button" class="btn btn-light" href="/login/" style="color: #2a7bcb;"> 
              Login 
            </a>
        {% endif %}
      </div>

      <!-- <li>
        <div style="display: flex;  margin-left: 1400%; height: 40px;">
        <a class="btn btn-success" type="submit" href="{% url 'home' %}" role="button"> Home </a>
        </div>
      </li> -->
    </ul>
</nav>

<form method="get" action="" class="form-inline my-2 my-lg-0" style="display: flex; justify-content: center;">
  <input class="form-control mr-sm-2" 
         type="search" 
         name="q" 
         placeholder="Search by company, industry, title or location" 
         aria-label="Search"
         value="{{ query }}"
         style="width: 600px;">
  <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
</form>
<br><br>

{% if query %}
  <h5 class="text-center text-info">Showing results for: <strong>"{{ query }}"</strong></h5>
{% endif %}


    <h2 class="page-title text-center mb-4">Latest Job Openings</h2>

    <div class="jobs-container">
        {% for job in jobs %}
  <div class="job-card">
    <a href="{% url 'job_details_only' job.id %}" class="job-card-link">
      <div class="job-header">
          <h3 class="job-title">{{ job.job_title }}</h3>
          <span class="company">{{ job.company_name }}</span>
      </div>

      <div class="job-info">
          <p><strong>üìç Location:</strong> {{ job.job_location }}</p>
          <p><strong>üíº Experience:</strong> {{ job.experience }} years</p>
          <p><strong>üí∞ Salary:</strong> Rs. {{ job.salary }}</p>
          <p><strong>üìù Description:</strong> {{ job.job_discription|truncatewords:25 }}</p>
          <p class="posted">üìÖ Posted on: {{ job.posted_on|date:"M d, Y" }}</p>
      </div>

      <div class="job-actions">
        {% if user.is_authenticated %}
          <a href="{% url 'apply_job' job.id %}" class="btn-apply" onclick="event.stopPropagation()">Apply Now</a>
        {% else %}
          <a href="{% url 'login' %}" class="btn-apply" onclick="event.stopPropagation()">Apply Now</a>
        {% endif %}
      </div>
    </a>
  </div>
        {% empty %}
        <p class="text-center text-muted">No jobs available.</p>
        {% endfor %}
    </div>
</body>
</html>
